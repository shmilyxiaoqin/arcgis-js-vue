<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title>vue项目测试</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.12/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.12/"></script>
</head>
<style>
    html, body {
        margin: 0;
        padding: 0;
    }

    body {
        width: 100%;
        height: 100vh;
    }
</style>
<script>
    let esri = null

    function arcgis(func) {
        require(['esri/Map', 'esri/Basemap', 'esri/Viewpoint', 'esri/Color',

                'esri/views/MapView', 'esri/views/ui/DefaultUI', 'esri/views/draw/Draw',

                'esri/widgets/Legend', 'esri/widgets/Home', 'esri/widgets/Search', 'esri/widgets/BasemapToggle',
                'esri/widgets/ScaleBar', 'esri/widgets/Locate', 'esri/widgets/LayerList', 'esri/widgets/Expand',

                'esri/layers/TileLayer', 'esri/layers/MapImageLayer', 'esri/layers/GraphicsLayer', 'esri/layers/FeatureLayer', "esri/layers/WebTileLayer",
                "esri/layers/CSVLayer", "esri/layers/KMLLayer", "esri/layers/StreamLayer", "esri/layers/ImageryLayer", "esri/layers/GeoJSONLayer", "esri/layers/VectorTileLayer",

                'esri/tasks/IdentifyTask', 'esri/tasks/FindTask', 'esri/tasks/QueryTask', 'esri/tasks/GeometryService', "esri/tasks/ClosestFacilityTask",
                "esri/tasks/ServiceAreaTask","esri/tasks/RouteTask","esri/tasks/Locator",

                'esri/tasks/support/IdentifyParameters', 'esri/tasks/support/FindParameters', 'esri/tasks/support/Query', 'esri/tasks/support/ProjectParameters',
                "esri/tasks/support/ClosestFacilityParameters","esri/tasks/support/ServiceAreaParameters","esri/tasks/support/RouteParameters","esri/tasks/support/BufferParameters",

                'esri/geometry/Point', 'esri/geometry/Circle', 'esri/Graphic', 'esri/geometry/Polygon', 'esri/geometry/SpatialReference',

                'esri/symbols/CIMSymbol', 'esri/symbols/WebStyleSymbol', 'esri/symbols/SimpleFillSymbol', 'esri/symbols/SimpleLineSymbol', "esri/symbols/PictureMarkerSymbol",
                "esri/symbols/SimpleMarkerSymbol", "esri/symbols/TextSymbol",

                "esri/renderers/SimpleRenderer", "esri/renderers/UniqueValueRenderer", "esri/renderers/ClassBreaksRenderer", "esri/renderers/HeatmapRenderer",

                'esri/core/urlUtils',

                'dojo/domReady!'
            ],

            function (Map, Basemap, Viewpoint, Color,
                      MapView, DefaultUI, Draw,
                      Legend, Home, Search, BasemapToggle, ScaleBar, Locate, LayerList, Expand,
                      TileLayer, MapImageLayer, GraphicsLayer, FeatureLayer, WebTileLayer, CSVLayer, KMLLayer, StreamLayer, ImageryLayer,
                      GeoJSONLayer, VectorTileLayer,
                      IdentifyTask, FindTask, QueryTask, GeometryService,ClosestFacilityTask,ServiceAreaTask,RouteTask,Locator,
                      IdentifyParameters, FindParameters, Query, ProjectParameters,ClosestFacilityParameters,RouteParameters,BufferParameters,
                      ServiceAreaParameters,
                      Point, Circle, Graphic, Polygon,
                      SpatialReference,
                      CIMSymbol, WebStyleSymbol, SimpleFillSymbol, SimpleLineSymbol, PictureMarkerSymbol, SimpleMarkerSymbol, TextSymbol,
                      SimpleRenderer, UniqueValueRenderer, ClassBreaksRenderer, HeatmapRenderer,
                      urlUtils,
            ) {
                if (!esri) {
                    esri = {
                        Map,
                        Basemap,
                        Viewpoint,
                        Draw,
                        Color,
                        MapView,
                        DefaultUI,
                        Legend,
                        Home,
                        Search,
                        BasemapToggle,
                        ScaleBar,
                        Locate,
                        LayerList,
                        Expand,
                        TileLayer,
                        MapImageLayer,
                        GraphicsLayer,
                        FeatureLayer,
                        WebTileLayer,
                        CSVLayer,
                        KMLLayer,
                        StreamLayer,
                        ImageryLayer,
                        GeoJSONLayer,
                        VectorTileLayer,
                        IdentifyTask,
                        FindTask,
                        QueryTask,
                        GeometryService,
                        ClosestFacilityTask,
                        ServiceAreaTask,
                        RouteTask,
                        Locator,
                        IdentifyParameters,
                        FindParameters,
                        Query,
                        ProjectParameters,
                        ClosestFacilityParameters,
                        ServiceAreaParameters,
                        RouteParameters,
                        BufferParameters,
                        Point,
                        Circle,
                        Graphic,
                        Polygon,
                        SpatialReference,
                        CIMSymbol,
                        WebStyleSymbol,
                        SimpleFillSymbol,
                        SimpleLineSymbol,
                        PictureMarkerSymbol,
                        SimpleMarkerSymbol,
                        TextSymbol,
                        SimpleRenderer,
                        UniqueValueRenderer,
                        ClassBreaksRenderer,
                        HeatmapRenderer,
                        urlUtils,
                    }
                    window.esri = esri
                }
                func(esri)
            }
        )
    }

    window.arcgis = arcgis
    arcgis(() => {
        console.log('ArcGIS 对象加载完成')
    })
</script>
<body>
<div id="app"></div>
</body>
</html>
